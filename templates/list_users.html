{% extends "base.html" %}

{% block title %}用户列表 - XLY VPN{% endblock %}

{% block content %}
<div class="card shadow-sm">
       <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">用户列表</h5>
            <a href="{{ url_for('users.add_user') }}" class="btn btn-sm btn-primary">
                <i class="bi bi-plus-lg"></i> 添加用户
            </a>
        </div>
 
        <table class="table table-striped table-bordered  table-hover w-80">
            <thead class="table-dark">
                <tr>
                    <th>序号</th>
                    <th>用户名</th>
                    <th>部门</th>
                    <th>角色</th>
                    <th>操作</th> 
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user['id'] }}</td>
                        <td>{{ user['username'] }}</td>
                        <td>{{ user['department'] }}</td>
                        <td>{{ user['role'] }}</td>
                        <td class="text-center">
                            {% if session['role'] == 'admin' and user['role'] != 'admin' %}
                                <a href="{{ url_for('users.edit_user', user_id=user['id']) }}" class="btn btn-warning btn-sm">
                                    修改
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
</div>
{% endblock %}
